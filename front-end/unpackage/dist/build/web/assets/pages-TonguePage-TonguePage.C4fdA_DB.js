import{r as a,a as s,c as l,w as e,S as t,o,b as c,d as n,e as u,f as i,k as d,l as r,F as f,g as _,u as p,h as v,i as g,j as h,t as m}from"./index-D1L9_iKf.js";import{_ as y}from"./shetou.qP5zUlIe.js";import{_ as k,a as b,b as x}from"./_plugin-vue_export-helper.C_74TqPX.js";const T=""+new URL("oral-9MZIM3mR.png",import.meta.url).href,j="http://192.168.43.42:5173/",F=k({__name:"TonguePage",setup(k){const F=a(!1),z=a(!1);a(!1);const C=a("nothing"),w=a(""),P=s({condition:[],analyse:[]}),I=a(!1),M=a(!1);a("");const R=a("");function q(){M.value=!0,_({count:1,success:a=>{const s=a.tempFilePaths[0];console.log(s),p({url:j+"getpictures_tongue",filePath:s,name:"file",success:a=>{console.log("上传成功:",a),R.value=a.data,M.value=!1,z.value=!0,C.value=j+"shot_tongue/"+R.value},fail:a=>{console.log("上传失败:",a)}})}})}return(a,s)=>{const _=g,p=h,k=t;return o(),l(k,{class:"container","scroll-y":"true"},{default:e((()=>[F.value?u("",!0):(o(),l(_,{key:0,class:"photo-section"},{default:e((()=>[c(_,{class:"top-section",style:{paddingTop:"50px"}}),c(_,{class:"take-photo"},{default:e((()=>[z.value||M.value?u("",!0):(o(),l(_,{key:0,class:"photo-icon"},{default:e((()=>[c(p,{class:"kouqiang-icon",src:y}),c(_,{class:"paizhao-secion"},{default:e((()=>[c(_,{class:"paizhao-button",onClick:s[0]||(s[0]=a=>q())},{default:e((()=>[c(p,{class:"camera-icon",src:b}),c(_,null,{default:e((()=>[n("上传图片")])),_:1})])),_:1}),c(_,{class:"phone-text"},{default:e((()=>[n("请将摄像头按照对准舌苔，确保拍摄角度与上图一致。")])),_:1})])),_:1})])),_:1})),M.value?(o(),l(_,{key:1,class:"loading1-container"},{default:e((()=>[i("div",{class:"loading1"},[i("div"),i("div"),i("div")]),c(_,null,{default:e((()=>[n("正在上传图片...")])),_:1})])),_:1})):u("",!0),!z.value||I.value||M.value?u("",!0):(o(),l(_,{key:2,class:"photo-result"},{default:e((()=>[c(p,{src:C.value,mode:"scaleToFill",class:"yachi"},null,8,["src"]),c(_,{class:"confirm-button-container"},{default:e((()=>[c(_,{class:"restart-button confirm-button",onClick:s[1]||(s[1]=a=>q())},{default:e((()=>[c(p,{class:"yes",src:b}),c(_,null,{default:e((()=>[n("重新上传")])),_:1})])),_:1}),c(_,{class:"confirm-button",onClick:s[2]||(s[2]=a=>(console.log("确认图片"),console.log(w.value),I.value=!0,void v({url:j+"confirm_shot_tongue/"+R.value,method:"GET",header:{"Content-Type":"application/json"},success:a=>{I.value=!1,console.log(a),P.condition=a.data.message.condition,P.analyse=a.data.message.analyse,F.value=!0},fail:a=>{console.error("请求失败",a)}})))},{default:e((()=>[c(p,{class:"yes",src:x}),c(_,null,{default:e((()=>[n("确认图片")])),_:1})])),_:1})])),_:1})])),_:1})),z.value&&I.value?(o(),l(_,{key:3,class:"loading-container"},{default:e((()=>[i("div",{class:"loading"}),c(_,null,{default:e((()=>[n("正在分析消化健康状况...")])),_:1})])),_:1})):u("",!0)])),_:1})])),_:1})),F.value?(o(),l(_,{key:1,class:"analyse-section"},{default:e((()=>[c(_,{class:"top-section",style:{paddingTop:"30px"}}),c(_,{class:"photo-text"},{default:e((()=>[n("舌苔结果分析")])),_:1}),c(_,{class:"photo"},{default:e((()=>[c(_,{class:"picture-container"},{default:e((()=>[c(p,{class:"picture",src:C.value,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),c(_,{class:"zhuangkuang-container"},{default:e((()=>[c(_,{class:"health"},{default:e((()=>[c(_,{class:"zhuangkuang"},{default:e((()=>[c(p,{src:T,mode:"scaleToFill",class:"yachi-picture"}),n(" 舌苔健康状况 ")])),_:1}),(o(!0),d(f,null,r(P.condition,(a=>(o(),l(_,{class:"content"},{default:e((()=>[c(_,{class:"fu-title"},{default:e((()=>[n(m(a.title),1)])),_:2},1024),c(_,{class:"yinshi"},{default:e((()=>[(o(!0),d(f,null,r(a.content,(a=>(o(),l(_,{class:"fu-content"},{default:e((()=>[n(m(a),1)])),_:2},1024)))),256))])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})):u("",!0)])),_:1})}}},[["__scopeId","data-v-6288ba23"]]);export{F as default};
